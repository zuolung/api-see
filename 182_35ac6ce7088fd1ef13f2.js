"use strict";(self.webpackChunkapi_see=self.webpackChunkapi_see||[]).push([[182],{5182:(s,a,n)=>{n.r(a),n.d(a,{default:()=>p});const p={tile:"api-seevscode插件",docs:'<h1>api-see vscode插件</h1>\n<p>将指定的swagger模块或者接口，转换为ts文件和请求方法文件</p>\n<div class="card"><h3 id="%E5%8A%9F%E8%83%BD"><svg viewBox="0 0 1024 1024"  width="14" height="14"><path d="M491.054545 779.636364l-125.672727 125.672727c-32.581818 32.581818-76.8 51.2-123.345454 51.2s-90.763636-18.618182-123.345455-51.2c-67.490909-67.490909-67.490909-179.2 0-246.690909l223.418182-223.418182c32.581818-32.581818 76.8-51.2 123.345454-51.2s90.763636 18.618182 123.345455 51.2c13.963636 13.963636 34.909091 13.963636 46.545455 0 13.963636-13.963636 13.963636-34.909091 0-46.545455-93.090909-93.090909-246.690909-93.090909-342.109091 0L69.818182 612.072727c-46.545455 46.545455-69.818182 107.054545-69.818182 169.890909C0 847.127273 25.6 907.636364 69.818182 954.181818c46.545455 46.545455 109.381818 69.818182 169.890909 69.818182 62.836364 0 123.345455-23.272727 169.890909-69.818182l125.672727-125.672727c13.963636-13.963636 13.963636-34.909091 0-46.545455-9.309091-16.290909-30.254545-16.290909-44.218182-2.327272z" p-id="2808"></path><path d="M954.181818 69.818182c-93.090909-93.090909-246.690909-93.090909-342.109091 0l-125.672727 125.672727c-13.963636 13.963636-13.963636 34.909091 0 46.545455 13.963636 13.963636 34.909091 13.963636 46.545455 0L658.618182 116.363636c32.581818-32.581818 76.8-51.2 123.345454-51.2s90.763636 18.618182 123.345455 51.2c67.490909 67.490909 67.490909 179.2 0 246.690909l-223.418182 223.418182c-32.581818 32.581818-76.8 51.2-123.345454 51.2s-90.763636-18.618182-123.345455-51.2c-13.963636-13.963636-34.909091-13.963636-46.545455 0-13.963636 13.963636-13.963636 34.909091 0 46.545455 46.545455 46.545455 109.381818 69.818182 169.89091 69.818182 62.836364 0 123.345455-23.272727 169.890909-69.818182l223.418181-223.418182c46.545455-46.545455 69.818182-107.054545 69.818182-169.890909C1024 176.872727 998.4 116.363636 954.181818 69.818182z" p-id="2809"></path></svg>功能</h3>\n<p>swagger json转ts类型:</p>\n<ul>\n<li>输入<code>#11</code>触发菜单选择，将指定swagger模块转换为ts类型文件和请求方法文件</li>\n<li>输入<code>#22</code>触发菜单选择，将指定swagger接口转换为ts类型文件和请求方法文件</li>\n</ul>\n<p>ts类型生成请求方法，在请求方法文件中输入<code>#33</code>，根据相对文件路径<code>./typings/::::_AB当前文件名称}</code>生成请求方法</p>\n</div><div class="card"><h3 id="%E8%A6%81%E6%B1%82"><svg viewBox="0 0 1024 1024"  width="14" height="14"><path d="M491.054545 779.636364l-125.672727 125.672727c-32.581818 32.581818-76.8 51.2-123.345454 51.2s-90.763636-18.618182-123.345455-51.2c-67.490909-67.490909-67.490909-179.2 0-246.690909l223.418182-223.418182c32.581818-32.581818 76.8-51.2 123.345454-51.2s90.763636 18.618182 123.345455 51.2c13.963636 13.963636 34.909091 13.963636 46.545455 0 13.963636-13.963636 13.963636-34.909091 0-46.545455-93.090909-93.090909-246.690909-93.090909-342.109091 0L69.818182 612.072727c-46.545455 46.545455-69.818182 107.054545-69.818182 169.890909C0 847.127273 25.6 907.636364 69.818182 954.181818c46.545455 46.545455 109.381818 69.818182 169.890909 69.818182 62.836364 0 123.345455-23.272727 169.890909-69.818182l125.672727-125.672727c13.963636-13.963636 13.963636-34.909091 0-46.545455-9.309091-16.290909-30.254545-16.290909-44.218182-2.327272z" p-id="2808"></path><path d="M954.181818 69.818182c-93.090909-93.090909-246.690909-93.090909-342.109091 0l-125.672727 125.672727c-13.963636 13.963636-13.963636 34.909091 0 46.545455 13.963636 13.963636 34.909091 13.963636 46.545455 0L658.618182 116.363636c32.581818-32.581818 76.8-51.2 123.345454-51.2s90.763636 18.618182 123.345455 51.2c67.490909 67.490909 67.490909 179.2 0 246.690909l-223.418182 223.418182c-32.581818 32.581818-76.8 51.2-123.345454 51.2s-90.763636-18.618182-123.345455-51.2c-13.963636-13.963636-34.909091-13.963636-46.545455 0-13.963636 13.963636-13.963636 34.909091 0 46.545455 46.545455 46.545455 109.381818 69.818182 169.89091 69.818182 62.836364 0 123.345455-23.272727 169.890909-69.818182l223.418181-223.418182c46.545455-46.545455 69.818182-107.054545 69.818182-169.890909C1024 176.872727 998.4 116.363636 954.181818 69.818182z" p-id="2809"></path></svg>要求</h3>\n<p>根目录配置api.config.js文件</p>\n<div class="code-box-max">\n<div class="copy-code-btn"></div>\n<pre><code class="language-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {\n  <span class="hljs-attr">swaggers</span>: {\n    <span class="hljs-attr">shop</span>: <span class="hljs-string">&#x27;http://xxxswagger.com&#x27;</span>,\n    <span class="hljs-attr">order</span>: <span class="hljs-string">&#x27;http://xxxswagger.com&#x27;</span>,\n  },\n  <span class="hljs-comment">// 默认生成的服务配置, ts描述、文件名称、文件名称转驼峰</span>\n  <span class="hljs-attr">markeService</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">{ def, fileNameOrigin, fileNameCamel }</span>) {\n    <span class="hljs-keyword">let</span> <span class="hljs-variable constant_">IMPORT_TYPES</span> = [];\n    <span class="hljs-keyword">let</span> <span class="hljs-variable constant_">SERVICES</span> = <span class="hljs-string">&quot;&quot;</span>;\n    <span class="hljs-keyword">let</span> code = <span class="hljs-string">::::_QA/* eslint-disable */\n  // @ts-nocheck\n  import { utils } from &#x27;@dian/dn&#x27;\n  IMPORT_TYPES\n  const { RemoteService } = utils\n  \n  export class <span class="hljs-subst">::::_ABfileNameCamel}</span>Service extends RemoteService {\n    readonly name: string = &#x27;<span class="hljs-subst">::::_ABfileNameCamel}</span>&#x27;\n  \n    SERVICES\n  }\n    ::::_QA</span>;\n    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> def) {\n      <span class="hljs-keyword">const</span> item = def[key];\n      <span class="hljs-comment">// @ts-ignore</span>\n      <span class="hljs-keyword">if</span> (key.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;Record&lt;string&quot;</span>) || !item.<span class="hljs-property">url</span> || !item.<span class="hljs-property">method</span>) <span class="hljs-keyword">continue</span>;\n      <span class="hljs-variable constant_">IMPORT_TYPES</span>.<span class="hljs-title function_">push</span>(key);\n      <span class="hljs-comment">// @ts-ignore</span>\n      <span class="hljs-keyword">const</span> method = item.<span class="hljs-property">method</span>;\n      <span class="hljs-comment">// @ts-ignore</span>\n      <span class="hljs-keyword">const</span> description = item.<span class="hljs-property">description</span> || <span class="hljs-string">&quot;--&quot;</span>;\n      <span class="hljs-comment">// @ts-ignore</span>\n      <span class="hljs-keyword">const</span> url = item.<span class="hljs-property">url</span>;\n      <span class="hljs-keyword">let</span> responseTT = <span class="hljs-string">&quot;&quot;</span>;\n      <span class="hljs-keyword">if</span> (\n        item?.<span class="hljs-property">properties</span>?.<span class="hljs-property">response</span>?.<span class="hljs-property">type</span> === <span class="hljs-string">&quot;object&quot;</span> &amp;&amp;\n        item?.<span class="hljs-property">properties</span>?.<span class="hljs-property">response</span>?.<span class="hljs-property">properties</span>?.<span class="hljs-property">data</span>\n      ) {\n        responseTT = <span class="hljs-string">::::_QA&lt;<span class="hljs-subst">::::_ABkey}</span>[&#x27;response&#x27;][&#x27;data&#x27;]&gt;::::_QA</span>;\n      }\n  \n      <span class="hljs-variable constant_">SERVICES</span> += <span class="hljs-string">::::_QA// <span class="hljs-subst">::::_ABdescription}</span> \n::::_QA</span>;\n      <span class="hljs-variable constant_">SERVICES</span> += <span class="hljs-string">::::_QAasync <span class="hljs-subst">::::_ABkey}</span>Service (params: <span class="hljs-subst">::::_ABkey}</span>[&#x27;request&#x27;]) {\n        const { data } = await this.<span class="hljs-subst">::::_ABmethod}</span><span class="hljs-subst">::::_ABresponseTT}</span>(&#x27;<span class="hljs-subst">::::_ABurl}</span>&#x27;, { params })\n        return data\n      }\n\n::::_QA</span>;\n    }\n    <span class="hljs-comment">// 生成请求文件的路径是固定的，所有事下面./typings/xx固定的引用路径</span>\n    code = code.<span class="hljs-title function_">replace</span>(\n      <span class="hljs-string">&quot;IMPORT_TYPES&quot;</span>,\n      <span class="hljs-string">::::_QAimport type { <span class="hljs-subst">::::_ABIMPORT_TYPES.join(\n        <span class="hljs-string">&quot;,&quot;</span>\n      )}</span> } from &#x27;./typings/<span class="hljs-subst">::::_ABfileNameOrigin}</span>&#x27;::::_QA</span>\n    );\n    code = code.<span class="hljs-title function_">replace</span>(<span class="hljs-string">&quot;SERVICES&quot;</span>, <span class="hljs-variable constant_">SERVICES</span>);\n  \n    <span class="hljs-keyword">return</span> code;\n  }\n}\n\n</code></pre>\n</div>\n</div><div class="card"><h3 id="%E4%BD%BF%E7%94%A8"><svg viewBox="0 0 1024 1024"  width="14" height="14"><path d="M491.054545 779.636364l-125.672727 125.672727c-32.581818 32.581818-76.8 51.2-123.345454 51.2s-90.763636-18.618182-123.345455-51.2c-67.490909-67.490909-67.490909-179.2 0-246.690909l223.418182-223.418182c32.581818-32.581818 76.8-51.2 123.345454-51.2s90.763636 18.618182 123.345455 51.2c13.963636 13.963636 34.909091 13.963636 46.545455 0 13.963636-13.963636 13.963636-34.909091 0-46.545455-93.090909-93.090909-246.690909-93.090909-342.109091 0L69.818182 612.072727c-46.545455 46.545455-69.818182 107.054545-69.818182 169.890909C0 847.127273 25.6 907.636364 69.818182 954.181818c46.545455 46.545455 109.381818 69.818182 169.890909 69.818182 62.836364 0 123.345455-23.272727 169.890909-69.818182l125.672727-125.672727c13.963636-13.963636 13.963636-34.909091 0-46.545455-9.309091-16.290909-30.254545-16.290909-44.218182-2.327272z" p-id="2808"></path><path d="M954.181818 69.818182c-93.090909-93.090909-246.690909-93.090909-342.109091 0l-125.672727 125.672727c-13.963636 13.963636-13.963636 34.909091 0 46.545455 13.963636 13.963636 34.909091 13.963636 46.545455 0L658.618182 116.363636c32.581818-32.581818 76.8-51.2 123.345454-51.2s90.763636 18.618182 123.345455 51.2c67.490909 67.490909 67.490909 179.2 0 246.690909l-223.418182 223.418182c-32.581818 32.581818-76.8 51.2-123.345454 51.2s-90.763636-18.618182-123.345455-51.2c-13.963636-13.963636-34.909091-13.963636-46.545455 0-13.963636 13.963636-13.963636 34.909091 0 46.545455 46.545455 46.545455 109.381818 69.818182 169.89091 69.818182 62.836364 0 123.345455-23.272727 169.890909-69.818182l223.418181-223.418182c46.545455-46.545455 69.818182-107.054545 69.818182-169.890909C1024 176.872727 998.4 116.363636 954.181818 69.818182z" p-id="2809"></path></svg>使用</h3>\n<p>再ts文件头部添加注释：</p>\n<div class="code-box-max">\n<div class="copy-code-btn"></div>\n<pre><code class="language-ts"><span class="hljs-comment">/**\n * <span class="hljs-doctag">@swagger</span> <span class="hljs-variable">shop</span>\n */</span>\n</code></pre>\n</div>\n<p>然后换行输入 <code>#11</code>或者<code>#22</code></p>\n<p>生成ts的结构如下：</p>\n<div class="code-box-max">\n<div class="copy-code-btn"></div>\n<pre><code class="language-ts"><span class="hljs-comment">/**\n * shopList\n * <span class="hljs-doctag">@url</span> /test/shopList\n * <span class="hljs-doctag">@method</span> <span class="hljs-variable">get</span>\n * <span class="hljs-doctag">@introduce</span> --\n */</span>\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">ItestTestShopList</span> = {\n  <span class="hljs-attr">request</span>: {\n    <span class="hljs-comment">/**\n     * <span class="hljs-doctag">@description</span> <span class="hljs-variable">contractId</span>\n     */</span>\n    <span class="hljs-attr">contractId</span>: <span class="hljs-built_in">number</span>\n  }\n  <span class="hljs-attr">response</span>: <span class="hljs-built_in">number</span>\n}\n</code></pre>\n</div>\n</div>',h3Ids:"功能:::要求:::使用",codePath:[]}}}]);